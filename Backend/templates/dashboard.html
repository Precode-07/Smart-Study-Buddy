<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-light">

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Welcome, <span id="usernameDisplay"></span></h2>
        <button class="btn btn-secondary" onclick="toggleTheme()">Toggle Dark/Light</button>
    </div>

    <!-- Upload Note -->
    <div class="card mb-4 shadow p-4">
        <h4>Upload Note</h4>
        <input id="title" class="form-control mb-2" placeholder="Title">
        <textarea id="content" class="form-control mb-2" rows="4" placeholder="Write your note..."></textarea>
        <button class="btn btn-primary" onclick="uploadNote()">Upload</button>
        <p id="uploadResponse" class="mt-2"></p>
    </div>

    <!-- Notes List -->
    <h4>Your Notes</h4>
    <div id="notesContainer" class="row g-3 mb-4">
        <!-- Notes cards will appear here dynamically -->
    </div>

    <!-- Output Section -->
    <h4>Generated Questions</h4>
    <pre id="outputBox" class="bg-light p-3 border rounded"></pre>
</div>

<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
<script>
const urlParams = new URLSearchParams(window.location.search);
document.getElementById("usernameDisplay").innerText = urlParams.get("username");
const userId = urlParams.get("user_id");

// Load notes when dashboard opens
window.onload = loadNotes;

// Dark/Light theme toggle
function toggleTheme() {
    document.body.classList.toggle("bg-dark");
    document.body.classList.toggle("text-white");
    document.querySelectorAll(".card").forEach(card => card.classList.toggle("bg-dark"));
    document.querySelectorAll(".card").forEach(card => card.classList.toggle("text-white"));
}
</script>
</body>
</html>
